(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/task_done.ed11d7bc.mp3"},21:function(e){e.exports=JSON.parse('{"name":"todolist","version":"0.1.0","description":"Tasks list manager application base on React.","main":"dist/index.js","scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"keywords":["todo","tasks","todo-list"],"devDependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","less":"^3.11.1","less-loader":"^5.0.0","react":"^16.13.0","react-dom":"^16.13.0","react-scripts":"3.4.0"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"author":"lanyueos@qq.com","license":"MIT","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.27","@fortawesome/free-solid-svg-icons":"^5.12.1","@fortawesome/react-fontawesome":"^0.1.9"}}')},23:function(e,t,n){e.exports=n(39)},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),s=n(3),i=n(12),u=n(7);function l(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function d(e){var t=[];for(var n in e){var a=e[n];l(a,"String")?t.push(a):a&&l(a,"Boolean")?t.push(n):l(a,"Object")&&t.push(d(a))}return t.join(" ")}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a={};for(var r in e){var o=e[r];a[o[t]]=n(o)}return a}function m(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=[],a=t.length,r=e;;){var o=parseInt(r/a),c=r%a;if(n.unshift(t[c]),!(o>0))break;r=o}return n.join("")}function p(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1];var l=o?r.a.createElement("input",{type:"text",autoFocus:!0,className:"board-input",placeholder:"Board name",onKeyDown:function(t){if(13===t.keyCode){var n=t.target.value.trim();n?e.onAdd({label:n},(function(e){e||c(!1)})):c(!1)}},onBlur:function(e){return!e.target.value&&c(!1)}}):r.a.createElement("button",{title:"Add a new board",onClick:function(e){c(!0)},className:"bt-add-board"},"+");return r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"board-content"},e.list.map((function(t,n){return r.a.createElement("button",{className:d(["board-item",{"is-active":e.value===t.name}]),key:n,onClick:function(){return e.onSelected(t.name)}},t.label)})),l,"all"!==e.value?r.a.createElement("button",{className:"bt-remove-board",title:"Remove current board",onClick:e.onRemove},r.a.createElement(i.a,{icon:u.e})):null),r.a.createElement("div",{className:"board-right"}))}n(33);function h(e){var t="undefined"===typeof e.trueValue||e.trueValue,n="undefined"!==typeof e.falseValue&&e.falseValue,a=e.value===t,o=a?t:n;return r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:o,checked:a,onChange:function(a){e.onChange&&e.onChange(a.target.checked?t:n)}}),r.a.createElement("span",{className:"status"})))}function v(e){return r.a.createElement("svg",{viewBox:"0 0 35 35",version:"1.1",className:d(["svg-icon svg-close",e.className])},r.a.createElement("path",{fill:"currentColor",d:"M19.5,17.5l5.1,5.1l-2,2l-5.1-5.1l-5.1,5.1l-2-2l5.1-5.1l-5.1-5.1l2-2l5.1,5.1l5.1-5.1l2,2L19.5,17.5z"}))}var g=n(8),b=n(9),y=n(15),k=n(10),w=n(14),E=n(22),j=n(13);function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(j.a)(M,t)}N.isLeapYear=function(e){return e%400===0||e%4===0&&e%100!==0},N.isValid=function(e){return"Invalid Date"!==(e=e instanceof Date?e:new Date(e)).toString()},N.days=function(e,t){if(!e)throw new Error("The `year` params canot be empty");var n=[31,28,31,30,31,30,31,31,30,31,30,31];return N.isLeapYear(e)&&(n[1]=29),"undefined"===typeof t?[].concat(n):n[t-1]};var O=["year","month","date","hour","minute","second","millisecond"],C=[60,60,24,7,365/12/7,12],x="second_minute_hour_day_week_month_year".split("_"),S="\u79d2_\u5206\u949f_\u5c0f\u65f6_\u5929_\u5468_\u4e2a\u6708_\u5e74".split("_"),T={zh:function(e,t){if(0===t)return["\u521a\u521a","\u7247\u523b\u540e"];var n=S[parseInt(t/2)];return["".concat(e," ").concat(n,"\u524d"),"".concat(e," ").concat(n,"\u540e")]},en:function(e,t){if(0===t)return["just now","right now"];var n=x[parseInt(t/2)];return e>1&&(n+="s"),["".concat(e," ").concat(n," ago"),"in ".concat(e," ").concat(n)]}},M=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"startOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=O.indexOf(e),a="day"===e;if(!a&&-1===n)throw new Error("The `unit` value '".concat(e,"' is not in ").concat(O));a&&(n=1);var r=[1,1,0,0,0,0],o=[12,this.days(this.get("month")),23,59,59,999],c=t?o.slice(n):r.slice(n);if(a){var s=this.get("day"),i=this.get("date");c[0]=t?i+6-s:i-s}switch(e){case"year":case"month":case"date":case"day":case"hour":case"minute":case"second":case"millisecond":return this.clone(c)}}},{key:"endOf",value:function(e){return this.startOf(e,!0)}},{key:"nextOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=O.indexOf(e),r="day"===e;if(!r&&-1===a)throw new Error("The `unit` value '".concat(e,"' is not in ").concat(O));r&&(a=2);var o=[null,null,null,null,null,null,null];return o[a]=n?r?this.get("date")-7*t:this.get(e)-1*t:r?this.get("date")+7*t:this.get(e)+1*t,this.clone(o)}},{key:"lastOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextOf(e,t,!0)}},{key:"clone",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=new t(this),a=0;a<e.length;a++)null!==e[a]&&"undefined"!==typeof e[a]&&n.set(O[O.length-e.length+a],e[a]);return n}},{key:"set",value:function(e,t){switch(t=+t,e){case"year":return this.setFullYear(t);case"month":return this.setMonth(t-1);case"date":return this.setDate(t);case"hour":return this.setHours(t);case"minute":return this.setMinutes(t);case"second":return this.setSeconds(t);case"millisecond":return this.setMilliseconds(t);default:throw new Error("The `unit` value '".concat(e,"' is not in ").concat(O))}}},{key:"get",value:function(e){switch(e){case"year":return this.getFullYear();case"month":return this.getMonth()+1;case"date":return this.getDate();case"day":return this.getDay();case"hour":return this.getHours();case"minute":return this.getMinutes();case"second":return this.getSeconds();case"millisecond":return this.getMilliseconds();default:throw new Error("The `unit` value '".concat(e,"' is not in ").concat(O))}}},{key:"isLeapYear",value:function(){return N.isLeapYear(this.getFullYear())}},{key:"days",value:function(e){return N.days(this.getFullYear(),e)}},{key:"format",value:function(e){var t=this;function n(e,t,n){var a=String(e);return!a||a.length>=t?a:Array(t-a.length+1).join(n)+a}var a={YYYY:function(){return t.getFullYear()},MM:function(){return n(t.getMonth()+1,2,0)},DD:function(){return n(t.getDate(),2,0)},HH:function(){return n(t.getHours(),2,0)},mm:function(){return n(t.getMinutes(),2,0)},ss:function(){return n(t.getSeconds(),2,0)},SSS:function(){return n(t.getMilliseconds(),3,0)}};return(e||"YYYY-MM-DD HH:mm:ss").replace(/Y{4}|M{2}|D{2}|H{2}|m{2}|s{2}|S{3}/g,(function(e){return a[e]()}))}},{key:"isValid",value:function(){return N.isValid(this)}},{key:"create",value:function(){return Object(j.a)(t,Array.prototype.slice.call(arguments))}},{key:"diff",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh",a=e instanceof t?e:this.create(e);if(!a.isValid())throw new Error("INVALID Date");if(!T[n])throw new Error("Not Supported local `"+n+"`");for(var r=(this.getTime()-a.getTime())/1e3,o=C.length,c=r<0?1:0,s=r=Math.abs(r),i=0;r>=C[i]&&i<o;i++)r/=C[i];return(r=Math.floor(r))>(0===(i*=2)?9:1)&&(i+=1),T[n](r,i,s)[c].replace("%s",r)}},{key:"add",value:function(e,t){var n=O.indexOf(t);if(-1===n)throw new Error("The `unit` value '".concat(t,"' is not in ").concat(O));var a=Array(O.length).fill(null);return a[n]=this.get(t)+e,this.clone(a)}}]),t}(Object(E.a)(Date)),L=N;function B(e){return r.a.createElement("div",{className:d(["todo-item",{"is-done":0===e.data.status}])},r.a.createElement("div",{className:"left"},r.a.createElement(h,{value:e.data.status,trueValue:0,falseValue:1,onChange:e.onStatus})),r.a.createElement("div",{className:"content"},r.a.createElement("h4",{className:"title"},e.data.title)),r.a.createElement("div",{className:"right"},r.a.createElement("span",{className:"todo-time",title:L(e.data.createdAt).format()},L().diff(e.data.createdAt)),r.a.createElement("button",{className:"td-btn td-delete-todo",onClick:function(){return e.onDelete(e.data)}},r.a.createElement(v,null))))}function A(e){return r.a.createElement("ul",{className:"todo-list"},0===e.list.length?r.a.createElement("div",{className:"no-data"},"No data"):null,e.list.map((function(t,n){return r.a.createElement(B,{data:t,key:n,onStatus:function(a){return e.onChangeStatus(a,t,n)},onDelete:e.onDelete})})))}function D(e){var t=e.pageCount,n=e.pagerCount,o=e.currentPage,c=Object(a.useMemo)((function(){return function(e,t,n){var a=(e-1)/2,r=!1,o=!1;t>e&&(n>e-a&&(r=!0),n<t-a&&(o=!0));var c=[];if(r&&!o)for(var s=t-(e-2);s<t;s++)c.push(s);else if(!r&&o)for(var i=2;i<e;i++)c.push(i);else if(r&&o)for(var u=Math.floor(e/2)-1,l=n-u;l<=n+u;l++)c.push(l);else for(var d=2;d<t;d++)c.push(d);return{pagers:c,showPrevMore:r,showNextMore:o}}(n,t,o)}),[t,n,o]);return r.a.createElement("ul",{className:"m-pager",onClick:function(t){if("UL"!==t.target.tagName){var a=t.target.dataset.page,r=n-2;"prev-more"===a?a=o-r:"next-more"===a&&(a=o+r),a!==o&&e.onPage&&e.onPage(Number(a))}}},t>0?r.a.createElement("li",{key:"first",className:d(["m-pager-number",{active:1===o}]),"data-page":"1"},"1"):null,c.showPrevMore?r.a.createElement("li",{key:"prev-more",className:d(["m-pager-number"]),"data-page":"prev-more"},"\xab"):null,c.pagers.map((function(e,t){return r.a.createElement("li",{key:t,className:d(["m-pager-number",{active:o===e}]),"data-page":e},e)})),c.showNextMore?r.a.createElement("li",{key:"next-more",className:d(["m-pager-number"]),"data-page":"next-more"},"\xbb"):null,o<=t&&1!==t?r.a.createElement("li",{key:"last",className:d(["m-pager-number",{active:o===t}]),"data-page":t},t):null)}function K(e){return 0===e.sizes.length?null:r.a.createElement("select",{className:"m-pagination-sizes",value:e.value,onChange:function(t){return e.onChange&&e.onChange(t.target.value)}},e.sizes.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e," \u6761/\u9875")})))}n(34);var I=function(e){var t=e.background,n=e.align,a=e.fontBlod,o=e.sizes||[10,20,30,50,100],c=(e.layout||"total,sizes,prev,pager,next").split(","),s=e.prevText||"Prev",i=e.nextText||"Next",u=e.total||0,l=Math.abs(e.pageSize||10),f=Math.abs(e.currentPage||1),m=Math.abs(e.pagerCount||5),p=Math.ceil(u/l);function h(t){e.onCurrentChange&&e.onCurrentChange(t)}function v(e){"prev"===e?h(f-1):"next"===e?h(f+1):e!==f&&h(e)}var g={total:r.a.createElement("span",{key:"total",className:"m-pagination-total"},"\u5171 ",u," \u6761"),sizes:r.a.createElement(K,{key:"sizes",value:l,sizes:o,onChange:e.onSizeChange}),pager:r.a.createElement(D,{key:"pager",currentPage:f,pagerCount:m,pageCount:p,onPage:function(e){return v(e)}}),prev:r.a.createElement("button",{key:"prev",className:"m-pagination-prev",onClick:function(e){return v("prev")},disabled:f<=1},s),next:r.a.createElement("button",{key:"next",className:"m-pagination-next",onClick:function(e){return v("next")},disabled:f>=p},i)};return r.a.createElement("div",{className:d(["m-pagination",{"is-background":t,"text-center":"center"===n,"text-right":"right"===n,"m-pagination--blod":a}])},c.map((function(e){return g[e]})))},Y=n(5);n(35);function z(e){return"[object Array]"===Object.prototype.toString.call(e)}var P=function(e){var t=Object(a.useRef)(null),n=z(e.children),o=e.canClickMaskClose,s=e.canEscKeydownClose,i=e.showClose;function u(t){27===t.keyCode&&s&&e.setClose("esc")}Object(a.useEffect)((function(){return document.removeEventListener("keydown",u,!1),document.addEventListener("keydown",u,!1),function(){document.removeEventListener("keydown",u,!1)}}),[]);var l=n?e.children.filter((function(e){return e.props&&"header"===e.props.slot})):null,d=n?e.children.filter((function(e){return e.props&&"footer"===e.props.slot})):null,f=Object(Y.a)({},e.wrapStyle,{display:e.show?null:"none",zIndex:e["z-index"]||null}),m=["modal-wrapper",e.className].filter((function(e){return!!e})).join(" "),p=r.a.createElement("div",{className:m,ref:t,style:f,onClick:function(){o&&e.setClose("click-mask")}},r.a.createElement("div",{className:"modal",onClick:function(e){return e.stopPropagation()},style:Object(Y.a)({},e.style,{width:e.width||null})},r.a.createElement("div",{className:"modal-header"},z(l)&&l.length>0?l:r.a.createElement("span",{className:"modal-title"},e.title),i?r.a.createElement("button",{className:"close",onClick:function(){return e.setClose("close-button")}},"\xd7"):null),r.a.createElement("div",{className:"modal-content"},n?e.children.filter((function(e){return!e.props||!e.props.slot})):e.children),z(d)&&d.length>0?r.a.createElement("div",{className:"modal-footer"},d):null));return e.appendToBody?c.a.createPortal(p,document.body):p};function _(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),o=n[0],c=n[1];function i(t){c(!1),e.onClose(t)}return r.a.createElement(P,{show:o,title:e.title,canClickMaskClose:e.canClickMaskClose,canEscKeydownClose:e.canEscKeydownClose,showClose:e.showClose,setClose:i},e.children,r.a.createElement("div",{slot:"footer",className:"align-right"},"confirm"===e.type?r.a.createElement("button",{className:"modal-cancel-button",onClick:function(){return i("cancel")}},e.cancelButtonText):null,r.a.createElement("button",{className:"modal-confirm-button",onClick:function(){return i("confirm")}},e.confirmButtonText)))}var R={type:"",title:"Title",confirmButtonText:"Confirm",cancelButtonText:"Cancel",canClickMaskClose:!1,canEscKeydownClose:!1,showClose:!0};function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var o=Object(Y.a)({},R,{},t),s=document.createElement("div");s.className="confirm"===o.type?"confirm-modal":"alert-modal",document.body.appendChild(s);var i=r.a.createElement(_,{type:o.type,title:o.title,confirmButtonText:o.confirmButtonText,cancelButtonText:o.cancelButtonText,canClickMaskClose:o.canClickMaskClose,canEscKeydownClose:o.canEscKeydownClose,showClose:o.showClose,onClose:function(e){"confirm"===e?n({confirm:!0,type:e}):o.noReject?n({confirm:!1,type:e}):a(e),c.a.unmountComponentAtNode(s),s.remove()},className:o.className,width:o.width,style:o.style},e);c.a.render(i,s)}))}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V(e,Object(Y.a)({title:"Dialog"},t,{type:"confirm"}))}var W=n(20),F=n.n(W);function J(e){return r.a.createElement("div",{className:"todo-status"},r.a.createElement("div",{className:"status-item"},r.a.createElement("span",{className:"number"},e.data.total)," Total"),r.a.createElement("div",{className:"status-item pending"},r.a.createElement("span",{className:"number error"},e.data.pending)," Pending"),r.a.createElement("div",{className:"status-item done"},r.a.createElement("span",{className:"number info"},e.data.done)," Done"))}function U(e){var t=e.currentBoard,n=Object(a.useState)(""),o=Object(s.a)(n,2),c=o[0],i=o[1];return Object(a.useMemo)((function(){!function(){var n={tagId:"all"!==t?t:""};e.store.getTodoRaw(n).then((function(e){var t={};for(var n in e.list){var a=e.list[n];t[a.tagId]?t[a.tagId].list.push(a):t[a.tagId]={board:a.board,list:[a]}}var r=[];for(var o in t)r.push("**".concat(t[o].board?t[o].board.label:"\u672a\u5206\u7c7b","**\n\n")),r.push(t[o].list.map((function(e){return"+ [".concat(0===e.status?"x":" ","] ").concat(e.title)})).join("\n")),r.push("\n\n");i(r.join("")+"\n")}))}()}),[t]),r.a.createElement(P,{show:e.show,title:"View Raw"},r.a.createElement("div",{className:"view-raw"},r.a.createElement("textarea",{defaultValue:c,className:"td-input td-input--block",rows:"10"})),r.a.createElement("div",{slot:"footer",className:"align-right"},r.a.createElement("button",{className:"modal-confirm-button",onClick:e.onHide},"Confirm")))}n(36);var q=function(e){var t=e.store,n=Object(a.useState)("all"),o=Object(s.a)(n,2),c=o[0],l=o[1],d=Object(a.useState)([]),m=Object(s.a)(d,2),h=m[0],v=m[1],g=Object(a.useState)([]),b=Object(s.a)(g,2),y=b[0],k=b[1],w=Object(a.useState)(1),E=Object(s.a)(w,2),j=E[0],N=E[1],O=Object(a.useState)(0),C=Object(s.a)(O,2),x=C[0],S=C[1],T=Object(a.useState)({done:0,pending:0}),M=Object(s.a)(T,2),L=M[0],B=M[1],D=Object(a.useState)(1),K=Object(s.a)(D,2),Y=K[0],z=K[1],P=Object(a.useState)(),_=Object(s.a)(P,2),R=_[0],V=_[1],W=Object(a.useState)(null),q=Object(s.a)(W,2),G=q[0],Q=q[1],X=Object(a.useState)(!1),Z=Object(s.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useMemo)((function(){return[[].concat([{name:"all",label:"All"}],h.map((function(e){return e.name=e.id,e}))),f(h,"id")]}),[h]),ne=Object(s.a)(te,2),ae=ne[0],re=ne[1];function oe(){var e={tagId:"all"!==c?c:"",page:j,sortKey:"createdAt",sortType:1===Y?"desc":"asc",status:R};t.getTaskList(e).then((function(e){k(e.list),S(e.count),B(e.status)}))}return Object(a.useMemo)((function(){oe()}),[c,j,Y,R]),Object(a.useEffect)((function(){if(t.getBoardList().then((function(e){v(e.list)})),e.enableAudio){var n=new Audio;n.volume=.8,Q(n)}}),[t]),r.a.createElement("div",{className:"to-do"},r.a.createElement(U,{show:$,onHide:function(){return ee(!1)},currentBoard:c,store:t}),r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"input-box"},r.a.createElement("input",{type:"text",placeholder:"What needs to be done?",className:"todo-input",onKeyDown:function(e){if(13===e.keyCode){var n=e.target.value.trim();if(n){var a={title:n,status:1,type:1,tagId:"all"!==c?c:null};t.addTask(a).then((function(e){oe()}))}e.target.value=""}}})),r.a.createElement(p,{list:ae,value:c,onSelected:function(e){l(e),N(1)},onAdd:function(e,n){t.addBoard(e).then((function(e){t.getBoardList().then((function(e){v(e.list)}))})),n(null)},onRemove:function(){return function(e){var n=re[e]?re[e].label:e;H(r.a.createElement("div",null,"Are you sure to remove the ",r.a.createElement("strong",null,n)," board?"),{noReject:!0}).then((function(n){n.confirm&&t.delBoard(e).then((function(e){t.getBoardList().then((function(e){l("all"),v(e.list)}))}))}))}(c)}}),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"main"},r.a.createElement("button",{className:"td-btn"+(0===R?" is-checked":""),title:"Show done only",onClick:function(){return V(0===R?void 0:0)}},r.a.createElement(i.a,{icon:u.a})),r.a.createElement("button",{className:"td-btn",title:"Sort time",onClick:function(){return z(1===Y?2:1)}},r.a.createElement(i.a,{icon:1===Y?u.d:u.c}))),r.a.createElement("div",{className:"right"},r.a.createElement("button",{className:"td-btn",title:"View raw",onClick:function(){return ee(!0)}},r.a.createElement(i.a,{icon:u.b})),r.a.createElement(J,{data:L})))),r.a.createElement("div",{className:"content"},r.a.createElement(A,{list:y,onChangeStatus:function(e,n,a){t.updateTask({id:n.id,status:e}).then((function(e){oe()})),0===e&&G&&(G.src=F.a,G.play())},onDelete:function(e){H(r.a.createElement("div",null,"Are you sure you want to delete this task?"),{noReject:!0}).then((function(n){n.confirm&&t.delTask(e.id).then((function(){oe()}))}))}})),r.a.createElement("div",{className:"footer"},r.a.createElement(I,{currentPage:j,total:x,pageSize:10,layout:"prev,pager,next",background:!0,onCurrentChange:N})))},G=n(1),Q=n.n(G),X=n(4),Z=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"addBoard",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delBoard",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBoardList",value:function(){var e=Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok",list:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaskList",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok",list:[],count:0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=n(18),ee=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(this,t),(e=Object(y.a)(this,Object(k.a)(t).call(this))).perfix=n.perfix||"",e.boardKey=e.key("board-list"),e.todoListKey=e.key("todo-list"),e}return Object(w.a)(t,e),Object(b.a)(t,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e);return null===n?t:JSON.parse(n)}},{key:"set",value:function(e,t){return localStorage.setItem(e,JSON.stringify(t))}},{key:"key",value:function(e){return(this.perfix+e).trim()}},{key:"addBoard",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.get(this.boardKey,[]),a=Date.now(),t.id=m(a),t.createdAt=a,this.set(this.boardKey,[].concat(Object($.a)(n),[t])),e.abrupt("return",{ret:0,msg:"ok"});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delBoard",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.get(this.boardKey,[]),e.t0=Q.a.keys(n);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(a=e.t1.value,n[a].id!==t){e.next=7;break}return n.splice(a,1),e.abrupt("break",9);case 7:e.next=2;break;case 9:return this.set(this.boardKey,n),e.abrupt("return",{ret:0,msg:"ok"});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBoardList",value:function(){var e=Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ret:0,msg:"ok",list:this.get(this.boardKey,[])});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.get(this.todoListKey,[]),a=Date.now(),t.id=m(a),t.createdAt=a,this.set(this.todoListKey,[].concat(Object($.a)(n),[t])),e.abrupt("return",{ret:0,msg:"ok"});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.get(this.todoListKey,[]),e.t0=Q.a.keys(n);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(a=e.t1.value,n[a].id!==t){e.next=7;break}return n.splice(a,1),e.abrupt("break",9);case 7:e.next=2;break;case 9:return this.set(this.todoListKey,n),e.abrupt("return",{ret:0,msg:"ok"});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTask",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a,r,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in n=t.id,a=this.get(this.todoListKey,[]),r=!1,a)a[o].id===n&&(a[o]=Object(Y.a)({},a[o],{},t),r=!0);return r&&this.set(this.todoListKey,a),e.abrupt("return",{ret:0,msg:"ok"});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaskList",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a,r,o,c,s,i,u,l,d,f,m;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d in n=t.page,a=void 0===n?1:n,r=t.pageSize,o=void 0===r?10:r,c=this.get(this.todoListKey,[]),s=(a-1)*o,i=t.sortKey||"createdAt",u=t.sortType||"desc",t.tagId&&(c=c.filter((function(e){return e.tagId===t.tagId}))),"undefined"!==typeof t.status&&(c=c.filter((function(e){return e.status===t.status}))),c.sort((function(e,t){return"desc"===u?e[i]>t[i]?-1:1:e[i]<t[i]?-1:1})),l={done:0,pending:0,total:c.length},c)0===(f=c[d]).status&&(l.done+=1),1===f.status&&(l.pending+=1);return m=c.slice(s,s+o),e.abrupt("return",{ret:0,msg:"ok",list:m,count:c.length,status:l});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTodoRaw",value:function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.get(this.todoListKey,[]),a=this.get(this.boardKey,[]),r=f(a,"id"),t.tagId&&(n=n.filter((function(e){return e.tagId===t.tagId}))),n.sort((function(e,t){return e<t?-1:1})),n.map((function(e){return e.board=r[e.tagId]||null,e})),e.abrupt("return",{ret:0,msg:"ok",list:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(Z),te=n(21);function ne(){return r.a.createElement("div",{className:"website-footer"},r.a.createElement("p",{className:"copyright"},r.a.createElement("span",null,"Make by ",r.a.createElement("a",{href:"https://github.com/mengdu",target:"_blank",rel:"noopener noreferrer"},"Lanyue")," \xa9 2020"),"\uff0c",r.a.createElement("span",null,r.a.createElement("a",{href:"https://github.com/mengdu/ToDoList"},"Github")),"\uff0c",r.a.createElement("span",null,"v",te.version)),r.a.createElement("p",{align:"center"},r.a.createElement("img",{src:"/logo.png",alt:"logo",width:"32",height:"32",title:"Todo Manager"})))}var ae=new ee;var re=function(){return r.a.createElement("div",{className:"App main-container"},r.a.createElement("div",{className:"todo-box"},r.a.createElement("h1",{className:"app-title"},"Task Manager"),r.a.createElement(q,{store:ae,enableAudio:!0})),r.a.createElement(ne,null))},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(38);c.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");oe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.c126a0b9.chunk.js.map